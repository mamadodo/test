{"version":3,"sources":["20210806_102244_222_radiohistory_ep0544.mp3","radireki_thumbnail.jpeg","components/AudioPlayer.jsx","App.js","index.js"],"names":["track","src","episode","date","title","thumbnail","episodeImg","epiNum","AudioPlayer","intervalRef","useRef","musicRef","Audio","useState","mDuration","setMDuration","useEffect","dTimer","setTimeout","current","duration","console","log","clearTimeout","timeBarWidth","timeBarX","timeBar","isPlay","setIsPlay","timePosition","setTimePosition","speed","speedIndex","setSpeedIndex","speedNextIndex","setSpeedNextIndex","musicTime","time","Math","floor","toString","padStart","musicCurrentTime","currentTime","musicRate","id","className","onClick","play","setInterval","pause","width","height","alt","e","target","getBoundingClientRect","nativeEvent","offsetX","ref","style","length","playbackRate","toFixed","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d3f813f0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/20210806_102244_222_radiohistory_ep0544.c5856041.mp3\";","export default __webpack_public_path__ + \"static/media/radireki_thumbnail.264ebb1a.jpeg\";","import React, { useRef, useState, useEffect } from \"react\";\n\nimport episode from \"../20210806_102244_222_radiohistory_ep0544.mp3\";\nimport episodeImg from \"../radireki_thumbnail.jpeg\";\n\nexport const track = {\n  src: episode,\n  date: \"2021.08.10\",\n  title: \"0544_イスラム教の六信五行から考える日本人にとっての「聖典」と「行動規範」\",\n  thumbnail: episodeImg,\n  epiNum: \"epi544\",\n}\n\nexport const AudioPlayer = () => {\n  const intervalRef = useRef(null);\n  const musicRef = useRef(new Audio(track.src));\n  const [mDuration, setMDuration] = useState(0.1);\n\n  useEffect(() => {\n    const dTimer = setTimeout(() => {\n      setMDuration(musicRef.current.duration)\n      console.log(mDuration);\n    }, 500);\n    return () => clearTimeout(dTimer);\n  }, [mDuration])\n\n  const timeBar = useRef(null);\n  let timeBarWidth;\n  let timeBarX;\n\n  const [isPlay, setIsPlay] = useState(false); // playing state\n  const [timePosition, setTimePosition] = useState(0); // time position\n\n  const speed = [1.0, 1.3, 1.5, 2.0, 0.5, 0.7];\n  const [speedIndex, setSpeedIndex] = useState(0);\n  const [speedNextIndex, setSpeedNextIndex] = useState(1);\n  console.log(speedIndex + \"初期値\");\n  \n  const musicTime = (time) => {\n    let hour = (Math.floor(time / 60 / 60)).toString().padStart( 2, '0');\n    let minutes = (Math.floor((time / 60) % 60)).toString().padStart( 2, '0');\n    let sec = (Math.floor(time % 60)).toString().padStart( 2, '0');\n    let convertTime;\n    convertTime = hour + ':' + minutes + ':' + sec;\n    return convertTime;\n  }\n\n  const start = () => {\n    if (intervalRef.current !== null) {\n      return;\n    }\n    intervalRef.current = setInterval(() => {\n      setTimePosition(musicRef.current.currentTime);\n    }, 1000);\n  }\n\n  const musicCurrentTime = musicRef.current.currentTime;\n  const musicRate = (Math.floor(musicCurrentTime / mDuration * 100));\n  console.log(musicRate);\n  // play button\n  const onClickTogglePlay = () => {\n    if (isPlay === false) {\n      musicRef.current.play();\n      setIsPlay(!isPlay);\n      console.log(isPlay);\n      start();\n    } else {\n      musicRef.current.pause();\n      setIsPlay(!isPlay);\n      console.log(isPlay);\n    }\n  }\n\n  // prev 15s\n  const onClickBack = () => {\n    console.log(\"playback\");\n    musicRef.current.currentTime -= 15;\n  }\n\n  // next 30s\n  const onClickSkip = () => {\n    console.log(\"playskip\");\n    musicRef.current.currentTime += 30;\n  }\n\n\n  // timebar click\n  const onClickTime = (e) => {\n    timeBarWidth = e.target.getBoundingClientRect().width;\n    timeBarX = e.nativeEvent.offsetX;\n    console.log(e.target.getBoundingClientRect().width);\n    console.log(e.nativeEvent.offsetX);\n    musicRef.current.currentTime = (timeBarX / timeBarWidth * mDuration);\n  }\n\n  // speed change\n  const onClickChangeSpeed = () => {\n    if (speedIndex === speed.length - 1) {\n      setSpeedIndex(0);\n      setSpeedNextIndex(speedNextIndex + 1);\n    } else {\n      setSpeedIndex(speedIndex + 1);\n      if (speedNextIndex === speed.length - 1) {\n        setSpeedNextIndex(0);\n      } else {\n        setSpeedNextIndex(speedNextIndex + 1);\n      }\n    }\n    musicRef.current.playbackRate = speed[speedNextIndex];\n    console.log(speedIndex);\n    console.log(speedNextIndex + 'next');\n  }\n\n  return (\n    <>\n    <div id=\"app\" className=\"app\">\n    <div id=\"audio_thumb\" onClick={onClickTogglePlay}>\n      <img className=\"ep_img\" src={track.thumbnail} width=\"160\" height=\"160\" alt={track.epiNum} />\n\n      {isPlay? \n        (\n          <i id=\"pause_ico\" className=\"material-icons\">pause_circle_outline</i>\n        ) : (\n          <i id=\"play_ico\" className=\"material-icons\">play_circle_outline</i>\n        )\n      }\n\n    </div>\n    <div id=\"audio_desc\">\n      <div className=\"ep-date\">{track.date}</div>\n      <div className=\"ep-title\">\n        {track.title}<span className=\"sp-nodisp\"></span>\n      </div>\n      <div id=\"timebar\">\n        <div id=\"timebar-bg\" onClick={onClickTime} ref={timeBar}>\n          <div id=\"timebar-past\" style={{width: musicRate + '%'}}>\n            <div id=\"timebar-num\">{musicRate + '%'}</div>\n          </div>\n        </div>\n      </div>\n      <div>\n        <span id=\"time_disp\">\n        {musicTime(timePosition)}/\n        {musicTime(mDuration)}\n        </span>\n        <p className=\"time_control_area\">\n          <span>\n            <img \n              id=\"playback\" \n              src=\"https://propo.fm/image/rewind.png\" \n              width=\"23\" \n              alt=\"rewind\" \n              onClick={onClickBack}\n            />\n          </span>\n          <span>\n            <img \n              id=\"skip\" \n              src=\"https://propo.fm/image/skip.png\" \n              width=\"23\" \n              alt=\"skip\"\n              onClick={onClickSkip}\n            />\n          </span>\n          <span id=\"speed_ctrl\" onClick={onClickChangeSpeed}>{speed[speedIndex].toFixed(1)}x</span>\n        </p>\n      </div>\n    </div>\n    </div>\n  </>\n\n  );\n}","import React from \"react\";\nimport { AudioPlayer } from \"./components/AudioPlayer\";\nimport \"./App.css\";\n\nexport const App = () => {\n\n  return (\n    <AudioPlayer>\n\n    </AudioPlayer>\n  );\n};\n","import ReactDOM from \"react-dom\";\n\nimport { App } from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}