{"version":3,"sources":["20210806_102244_222_radiohistory_ep0544.mp3","radireki_thumbnail.jpeg","App.js","index.js"],"names":["track","date","title","thumbnail","episodeImg","epiNum","App","musicRef","useRef","Audio","episode","intervalRef","useState","mDuration","setMDuration","useEffect","dTimer","setTimeout","current","duration","console","log","clearTimeout","timeBarWidth","timeBarX","timeBar","isPlay","setIsPlay","timePosition","setTimePosition","speed","speedIndex","setSpeedIndex","speedNextIndex","setSpeedNextIndex","musicTime","time","Math","floor","toString","padStart","musicCurrentTime","currentTime","musicRate","id","className","onClick","play","setInterval","pause","src","width","height","alt","e","target","getBoundingClientRect","nativeEvent","offsetX","ref","style","length","playbackRate","toFixed","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fde973ba.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/20210806_102244_222_radiohistory_ep0544.c5856041.mp3\";","export default __webpack_public_path__ + \"static/media/radireki_thumbnail.264ebb1a.jpeg\";","import React, { useEffect, useRef, useState } from \"react\";\nimport \"./App.css\";\n\n// import sound from \"./MusMus-JGL-017.mp3\";\nimport episode from \"./20210806_102244_222_radiohistory_ep0544.mp3\";\nimport episodeImg from \"./radireki_thumbnail.jpeg\";\n\nconst track = {\n  date: \"2021.08.10\",\n  title: \"0544_イスラム教の六信五行から考える日本人にとっての「聖典」と「行動規範」\",\n  thumbnail: episodeImg,\n  epiNum: \"epi544\",\n}\n\n\nexport const App = () => {\n  const musicRef = useRef(new Audio(episode));\n  const intervalRef = useRef(null);\n  // console.log(musicRef);\n  // console.log(musicRef.current.duration);\n  // console.log(isNaN(musicRef.current.duration));\n  const [mDuration, setMDuration] = useState();\n\n  useEffect(() => {\n    const dTimer = setTimeout(() => {\n      setMDuration(musicRef.current.duration)\n      console.log(mDuration);\n    }, 500);\n    return () => clearTimeout(dTimer);\n  }, [mDuration])\n  \n  const timeBar = useRef(null);\n  let timeBarWidth;\n  let timeBarX;\n\n  const [isPlay, setIsPlay] = useState(false); // playing state\n  const [timePosition, setTimePosition] = useState(0); // time position\n  // const [timeRate, setTimeRate] = useState(0); // time position\n\n  const speed = [1.0, 1.3, 1.5, 2.0, 0.5, 0.7];\n  const [speedIndex, setSpeedIndex] = useState(0);\n  const [speedNextIndex, setSpeedNextIndex] = useState(1);\n  console.log(speedIndex + \"初期値\");\n  \n  const musicTime = (time) => {\n    let hour = (Math.floor(time / 60 / 60)).toString().padStart( 2, '0');\n    let minutes = (Math.floor((time / 60) % 60)).toString().padStart( 2, '0');\n    let sec = (Math.floor(time % 60)).toString().padStart( 2, '0');\n    let convertTime;\n    convertTime = hour + ':' + minutes + ':' + sec;\n    return convertTime;\n  }\n\n  const start = () => {\n    if (intervalRef.current !== null) {\n      return;\n    }\n    intervalRef.current = setInterval(() => {\n      setTimePosition(musicRef.current.currentTime);\n      // setTimeRate(timePosition / musicRef.current.currentTime);\n    }, 1000);\n  }\n\n  const musicCurrentTime = musicRef.current.currentTime;\n  const musicRate = (Math.floor(musicCurrentTime / mDuration * 100));\n  console.log(musicRate);\n  // play button\n  const onClickTogglePlay = () => {\n    if (isPlay === false) {\n      musicRef.current.play();\n      setIsPlay(!isPlay);\n      console.log(isPlay);\n      start();\n    } else {\n      musicRef.current.pause();\n      setIsPlay(!isPlay);\n      console.log(isPlay);\n    }\n  }\n\n  // prev 15s\n  const onClickBack = () => {\n    console.log(\"playback\");\n    musicRef.current.currentTime -= 15;\n  }\n\n  // next 30s\n  const onClickSkip = () => {\n    console.log(\"playskip\");\n    musicRef.current.currentTime += 30;\n  }\n\n\n  // timebar click\n  const onClickTime = (e) => {\n    timeBarWidth = e.target.getBoundingClientRect().width;\n    timeBarX = e.nativeEvent.offsetX;\n    console.log(e.target.getBoundingClientRect().width);\n    console.log(e.nativeEvent.offsetX);\n    musicRef.current.currentTime = (timeBarX / timeBarWidth * mDuration);\n  }\n\n  // speed change\n  const onClickChangeSpeed = () => {\n    if (speedIndex === speed.length - 1) {\n      setSpeedIndex(0);\n      setSpeedNextIndex(speedNextIndex + 1);\n    } else {\n      setSpeedIndex(speedIndex + 1);\n      if (speedNextIndex === speed.length - 1) {\n        setSpeedNextIndex(0);\n      } else {\n        setSpeedNextIndex(speedNextIndex + 1);\n      }\n    }\n    musicRef.current.playbackRate = speed[speedNextIndex];\n    console.log(speedIndex);\n    console.log(speedNextIndex + 'next');\n  }\n\n  return (\n    <>\n      <div id=\"app\" className=\"app\">\n      <div id=\"audio_thumb\" onClick={onClickTogglePlay}>\n        <img className=\"ep_img\" src={track.thumbnail} width=\"160\" height=\"160\" alt={track.epiNum} />\n\n        {isPlay? \n          (\n            <i id=\"pause_ico\" className=\"material-icons\">pause_circle_outline</i>\n          ) : (\n            <i id=\"play_ico\" className=\"material-icons\">play_circle_outline</i>\n          )\n        }\n\n      </div>\n      <div id=\"audio_desc\">\n        <div className=\"ep-date\">{track.date}</div>\n        <div className=\"ep-title\">\n          {track.title}<span className=\"sp-nodisp\"></span>\n        </div>\n        <div id=\"timebar\">\n          <div id=\"timebar-bg\" onClick={onClickTime} ref={timeBar}>\n            <div id=\"timebar-past\" style={{width: musicRate + '%'}}>\n              <div id=\"timebar-num\">{musicRate + '%'}</div>\n            </div>\n          </div>\n        </div>\n        <div>\n          <span id=\"time_disp\">\n          {musicTime(timePosition)}/\n          {musicTime(musicRef.current.duration)}\n          </span>\n          <p className=\"time_control_area\">\n            <span>\n              <img \n                id=\"playback\" \n                src=\"https://propo.fm/image/rewind.png\" \n                width=\"23\" \n                alt=\"rewind\" \n                onClick={onClickBack}\n              />\n            </span>\n            <span>\n              <img \n                id=\"skip\" \n                src=\"https://propo.fm/image/skip.png\" \n                width=\"23\" \n                alt=\"skip\"\n                onClick={onClickSkip}\n              />\n            </span>\n            <span id=\"speed_ctrl\" onClick={onClickChangeSpeed}>{speed[speedIndex].toFixed(1)}x</span>\n          </p>\n        </div>\n      </div>\n      </div>\n    </>\n  );\n};\n","import ReactDOM from \"react-dom\";\n\nimport { App } from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}